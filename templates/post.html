<!DOCTYPE html>
<html lang="$lang$">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>$title$</title>
    <link rel="stylesheet" href="../../assets/style.css">
    <link rel="icon" href="../../assets/favicon.ico">
</head>
<body>
    <div class="container">
        <header class="site-header">
            <div class="logo"><a id="site-title" href="$base-path$/">microdancing</a></div>
            <nav>
                <a href="$base-path$/$lang$/">$nav-home$</a>
                <a href="$base-path$/es/" lang="es">ES</a>
                <a href="$base-path$/en/" lang="en">EN</a>
            </nav>
        </header>
        <main>
            <article>
                <header>
                    <h1>$title$</h1>
                    $if(date)$<time>$date$</time>$endif$
                </header>
                $body$
            </article>
        </main>
        <footer>
            <p>$footer$</p>
        </footer>
    </div>
    <script>
        const titles = ["Haciendo lo que más me gusta", "No esperes nada de mí, no esperes nada de mí"];
        document.getElementById("site-title").textContent = titles[Math.floor(Math.random() * titles.length)];

        // Progress indicator for long reads
        (function() {
            const markers = document.querySelectorAll('.progress-marker');
            if (markers.length === 0) return;

            const indicator = document.createElement('div');
            indicator.className = 'progress-indicator';
            document.body.appendChild(indicator);

            let ticking = false;
            window.addEventListener('scroll', function() {
                if (!ticking) {
                    window.requestAnimationFrame(function() {
                        const scrollY = window.scrollY;
                        const windowHeight = window.innerHeight;
                        let current = 0;

                        markers.forEach((marker, i) => {
                            if (marker.getBoundingClientRect().top < windowHeight * 0.5) {
                                current = i + 1;
                            }
                        });

                        if (scrollY > 200) {
                            indicator.textContent = current + '/' + markers.length;
                            indicator.classList.add('visible');
                        } else {
                            indicator.classList.remove('visible');
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        })();
    </script>
</body>
</html>
